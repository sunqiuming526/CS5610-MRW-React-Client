(this["webpackJsonpcs5600-mrw-react-client"]=this["webpackJsonpcs5600-mrw-react-client"]||[]).push([[0],{110:function(e,t,n){},112:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(30),i=n.n(s),o=(n(110),n(111),n(5)),l=n(9),u=(n.p,n(112),n(67),n(8)),d=n(12),j=n(16),h=n(76),b=n.n(h),m=n(54),p=n.n(m),O=n(37),f=n(181),x=n(186),v=n(95),g="FETCH_MOVIES",y="FETCH_MOVIE",_="FETCH_ACTOR",E="FETCH_ACTORS",C=" FIND_ARTICLES_BY_KEYWORD",I="FETCH_ARTICLES",N="FETCH_ARTICLES_BY_AUTHOR",T="FETCH_ARTICLE_BY_ID",w="ADD_ARTICLE",A="UPDATE_ARTICLE",k="DELETE_ARTICLE",S="ON_CHANGE",D={SEARCH_KEYWORD:"SEARCH_KEYWORD",TYPE_KEYWORD:"TYPE_KEYWORD",FIND_MOVIES_BY_TITLE:"FIND_MOVIES_BY_TITLE",FETCH_MOVIES:g,FETCH_MOVIE:y,FETCH_ACTOR:_,FETCH_ACTORS:E,GET_LOGIN_USER:"GET_LOGIN_USER",FETCH_ARTICLES:I,FETCH_ARTICLE:"FETCH_ARTICLE",FETCH_ARTICLES_BY_AUTHOR:N,FETCH_ARTICLE_BY_ID:T,ADD_ARTICLE:w,UPDATE_ARTICLE:A,DELETE_ARTICLE:k,ON_CHANGE:S,UPDATE_SEARCH_TYPE:"UPDATE_SEARCH_TYPE"},R=n(24),U=n.n(R),L=n(40);n(118);var M="w92",B="w154",F="w342";function P(e,t){return"http://image.tmdb.org/t/p/".concat(e,"/").concat(t)}var H="a41a171fff9eb512b2a0d0fe15d3405f";function Y(){return(Y=Object(L.a)(U.a.mark((function e(t){var n,c,r,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(H),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.next=8,fetch("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=").concat(H),{method:"GET"});case 8:return r=e.sent,e.next=11,r.json();case 11:return a=e.sent,c.casts=a.cast,e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(L.a)(U.a.mark((function e(t){var n,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/popular?api_key=".concat(H),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.results.slice(0,t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(L.a)(U.a.mark((function e(t){var n,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(H,"&query=").concat(t),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.results);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(L.a)(U.a.mark((function e(t){var n,c,r,a,s,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/person/".concat(t,"?api_key=").concat(H),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.next=8,fetch("https://api.themoviedb.org/3/person/".concat(t,"/images?api_key=").concat(H),{method:"GET"});case 8:return r=e.sent,e.next=11,r.json();case 11:return a=e.sent.profiles,console.log(a),a.sort((function(e,t){return t.vote_average-e.vote_average})),c.photos=a,e.next=17,fetch("https://api.themoviedb.org/3/person/".concat(t,"/movie_credits?api_key=").concat(H),{method:"GET"});case 17:return s=e.sent,e.next=20,s.json();case 20:return(i=e.sent.cast).sort((function(e,t){return t.vote_average-e.vote_average})),c.credits=i,e.abrupt("return",c);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(L.a)(U.a.mark((function e(t,n){var c,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=escape(t),e.next=3,fetch("https://api.themoviedb.org/3/search/person?api_key=".concat(H,"&query=").concat(c,"&page=").concat(n),{method:"GET"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J={findByTitle:function(e){return fetch("https://imdb8.p.rapidapi.com/title/find?q=".concat(e),{method:"GET",headers:{"x-rapidapi-host":"imdb8.p.rapidapi.com","x-rapidapi-key":"b3721fd8d8mshb6df83063eb73e8p11054fjsnb4d2c2322b3b"}}).then((function(e){return e.json()})).then((function(e){return console.log(e.results),console.log(e.results.map((function(e){return e.id}))),e.results.filter((function(e){return e.id.includes("title")}))})).catch((function(e){return console.log(e),e}))},findMoviesByUser:function(e){return Promise.resolve([])},fetchPopularMovies:function(e){return W.apply(this,arguments)},fetchMovieByID:function(e){return Y.apply(this,arguments)},fetchActorByID:function(e){return G.apply(this,arguments)},fetchMoviesByTitle:function(e){return K.apply(this,arguments)},findActorsByName:function(e,t){return V.apply(this,arguments)},getMovieNameById:function(){var e=Object(L.a)(U.a.mark((function e(t){var n,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(H,"&language=en-US"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.title);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q="https://mrw-final-project-node.herokuapp.com",z="".concat(q,"/users"),Q=("".concat(q,"/movies"),"".concat(q,"/comments")),X="login_access_token",Z=n(13),$=n.n(Z),ee="https://mrw-final-project-node.herokuapp.com/articles",te=function(){return fetch(ee).then((function(e){return e.json()}))},ne=te,ce=function(e){return fetch("".concat(ee,"/").concat(e)).then((function(e){return e.json()}))},re=function(e){return fetch("".concat(ee,"/").concat(e,"/allArticles")).then((function(e){return e.json()}))},ae=function(e){return fetch(ee,{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},se=function(e){return fetch("".concat(ee,"/").concat(e),{method:"DELETE"}).then((function(t){return e}))},ie=function(e,t){return fetch("".concat(ee,"/").concat(e),{method:"PUT",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},oe=function(e){return te().then((function(t){return t.filter((function(t){return t.title.includes(e)}))}))},le=Object(j.b)((function(e){return{keyword:e.navBarReducer.keyword,loginUser:e.navBarReducer.loginUser,searchType:e.navBarReducer.searchType}}),(function(e){return{typeKeyword:function(t){return e({type:D.TYPE_KEYWORD,keyword:t})},searchMovies:function(t){return J.findByTitle(t).then((function(t){return e({type:D.FIND_MOVIES_BY_TITLE,movies:t})}))},fetchMoviesByTitle:function(t){J.fetchMoviesByTitle(t).then((function(t){return e({type:g,movies:t})}))},getLoginUser:function(){return $.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(t){return e({type:D.GET_LOGIN_USER,loginUser:t.data})})).catch((function(e){console.log(e)}))},findArticlesByTitle:function(t){oe(t).then((function(t){return e({type:C,articles:t})}))},updateSearchType:function(t){return e({type:D.UPDATE_SEARCH_TYPE,searchType:t})}}}))((function(e){var t=e.keyword,n=void 0===t?"":t,a=e.typeKeyword,s=e.fetchMoviesByTitle,i=(e.loginUser,e.getLoginUser,e.searchMovies,e.findArticlesByTitle),o=Object(d.l)(),j=Object(d.k)(),h=Object(r.useState)("Movie"),m=Object(l.a)(h,2),g=m[0],y=m[1],_=Object(r.useState)({username:""}),E=Object(l.a)(_,2),C=E[0],I=E[1];Object(r.useEffect)((function(){$.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(e){200===e.status&&I(e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(c.jsxs)(b.a,{bg:"dark",variant:"dark",className:"mb-4",children:[Object(c.jsx)(b.a.Brand,{as:u.Link,to:"/",children:"Movie Review"}),Object(c.jsxs)(p.a,{className:"mr-auto",children:[Object(c.jsx)(p.a.Link,{as:u.Link,to:"/",children:"Home"}),Object(c.jsx)(p.a.Link,{as:u.Link,to:"/users/".concat(C._id,"/profile"),children:"Profile"}),Object(c.jsx)(p.a.Link,{as:u.Link,to:"/articles",children:"Articles"})]}),Object(c.jsxs)(f.a,{className:"w-25",children:[Object(c.jsx)(f.a.Prepend,{children:Object(c.jsxs)(x.a,{onSelect:y,children:[Object(c.jsx)(x.a.Toggle,{variant:"success",id:"dropdown-basic",children:g}),Object(c.jsxs)(x.a.Menu,{children:[Object(c.jsx)(x.a.Item,{eventKey:"Movie",children:"Movie"}),Object(c.jsx)(x.a.Item,{eventKey:"Actor",children:"Actor"}),Object(c.jsx)(x.a.Item,{eventKey:"Article",children:"Article"})]})]})}),Object(c.jsx)(v.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:function(e){return a(e.target.value)},value:n}),"Movie"===g&&Object(c.jsx)(O.a,{variant:"outline-info",onClick:function(){j.push("/movies?name=".concat(n)),s(n)},children:"Search"}),"Actor"===g&&Object(c.jsx)(O.a,{variant:"outline-info",onClick:function(){return j.push("/actors?name=".concat(n))},children:"Search"}),"Article"===g&&Object(c.jsx)(O.a,{variant:"outline-info",onClick:function(){return i(n)},children:"Search"}),C.username&&Object(c.jsx)(O.a,{variant:"outline-info",onClick:function(){console.log(o.pathname),localStorage.removeItem(X),j.push("/login")},children:"Logout"}),!C.username&&Object(c.jsx)(O.a,{variant:"outline-info",onClick:function(){console.log(o.pathname),j.push("/login")},children:"Login"})]})]})})),ue=(Object(j.b)((function(e){return{keyword:e.navBarReducer.keyword,movies:e.movieReducer.movies}}),(function(e){return{searchKeyword:function(t){e({type:D.SEARCH_KEYWORD,keyword:t}),console.log(t)},typeKeyword:function(t){return e({type:D.TYPE_KEYWORD,keyword:t})}}}))((function(e){var t=e.movies,n=void 0===t?[]:t;e.keyword;return Object(c.jsx)("div",{children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Title"}),Object(c.jsx)("th",{children:"Imdb ID"})]})}),Object(c.jsx)("tbody",{children:n.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.title}),Object(c.jsx)("td",{children:e.id})]},e.id)}))})]})})})),n(31));n(155);var de=Object(d.o)((function(e){var t=Object(r.useState)({username:"",email:"",password:"",role:"",confirmPassword:"",successMessage:null}),n=Object(l.a)(t,2),a=n[0],s=n[1],i=function(e){var t=e.target,n=t.id,c=t.value;s((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(ue.a)({},n,c))}))},u=function(){e.updateTitle("Home"),e.history.push("/home")};return Object(c.jsxs)("div",{className:"card col-12 col-lg-4 login-card mt-2 hv-center",children:[Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputUserName",children:"Username"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter Username",value:a.username,onChange:i})]}),Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:a.email,onChange:i}),Object(c.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:a.password,onChange:i})]}),Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",value:a.confirmPassword,onChange:i})]}),Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleSelectRole",children:"Role"}),Object(c.jsxs)("select",{className:"form-control",id:"role",onChange:i,children:[Object(c.jsx)("option",{value:"admin",selected:!0,children:"Administrator"}),Object(c.jsx)("option",{value:"user",children:"User"}),Object(c.jsx)("option",{value:"author",children:"Author"})]})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault(),a.password===a.confirmPassword?function(){if(a.email.length&&a.password.length){e.showError(null);var t={username:a.username,email:a.email,password:a.password,role:a.role};$.a.post(q+"/users/signup",t).then((function(t){200===t.status?(s((function(e){return Object(o.a)(Object(o.a)({},e),{},{successMessage:"Registration successful. Redirecting to home page.."})})),localStorage.setItem(X,t.data.token),u(),e.showError(null)):e.showError("Some error occurred")})).catch((function(e){console.log(e)}))}else e.showError("Please enter valid username and password")}():e.showError("Passwords do not match")},children:"Register"})]}),Object(c.jsx)("div",{className:"alert alert-success mt-2",style:{display:a.successMessage?"block":"none"},role:"alert",children:a.successMessage}),Object(c.jsxs)("div",{className:"mt-2",children:[Object(c.jsx)("span",{children:"Already have an account? "}),Object(c.jsx)("span",{className:"loginText",onClick:function(){return e.updateTitle("Login"),void e.history.push("/login")},children:"Login here"})]})]})})),je=(n(156),function(e){var t=Object(r.useState)("none"),n=Object(l.a)(t,2),a=n[0],s=n[1],i=function(){s("none"),e.hideError(null)};return Object(r.useEffect)((function(){null!==e.errorMessage?s("block"):i()})),Object(c.jsx)("div",{className:"alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:a},children:Object(c.jsxs)("div",{className:"d-flex alertMessage",children:[Object(c.jsx)("span",{children:e.errorMessage}),Object(c.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return i()},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})}),he=n(96),be=function(e){var t=e.children,n=Object(he.a)(e,["children"]);return Object(c.jsx)(d.d,Object(o.a)(Object(o.a)({},n),{},{render:function(e){var n=e.location;return localStorage.getItem(X)?t:Object(c.jsx)(d.c,{to:{pathname:"/login",state:{from:n}}})}}))},me=n(184),pe=n(189),Oe=n(103),fe={getCommentsForMovie:function(e){return fetch("".concat(q,"/movies/").concat(e,"/comments"),{method:"GET"}).then((function(e){return e.json()}))},addCommentForMovie:function(e){return fetch("".concat(q,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},getCommentsForUser:function(e){return console.assert(e),fetch("".concat(q,"/users/").concat(e,"/comments"),{method:"GET"}).then((function(e){return e.json()}))},deleteComment:function(e,t){return fetch("".concat(Q,"/").concat(e),{method:"DELETE",headers:{userId:t}}).then((function(e){return e.json()}))},updateComment:function(e){var t=e._id;fetch("".concat(Q,"/").concat(t),{method:"PUT",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))}},xe=n(97),ve=n(71),ge=n.n(ve),ye=function(e){var t=e.user,n=Object(r.useState)([]),a=Object(l.a)(n,2),s=a[0],i=a[1],u=Object(r.useState)({}),d=Object(l.a)(u,2),j=d[0],h=d[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),p=(m[0],m[1]);return Object(r.useEffect)((function(){t._id&&(fe.getCommentsForUser(t._id).then((function(e){i(e)})),p(!0))}),[t]),Object(r.useEffect)((function(){s.map((function(e){return J.getMovieNameById(e.movieId).then((function(t){!function(e,t){h((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(ue.a)({},e,t))}))}(e._id,t)}))}))}),[s]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{className:"mb-3",children:"My Comments"}),Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsxs)("table",{className:"table table-sm table-hover table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Comment"}),Object(c.jsx)("td",{children:"Movie"})]})}),Object(c.jsx)("tbody",{children:s.map((function(e){return Object(c.jsxs)("tr",{id:e._id,children:[Object(c.jsx)("td",{children:Object(c.jsx)("strong",{children:e.text})}),Object(c.jsx)("td",{children:Object(c.jsx)(xe.HashLink,{to:"/movies/".concat(e.movieId,"/#").concat(e._id),children:j[e._id]})})]})}))})]})})]})},_e=n(60),Ee=function(e,t){return fetch("".concat(z,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{password:!1};if(!1===t.password){var n,c=Object(_e.a)(e);try{for(c.s();!(n=c.n()).done;){var r=n.value;delete r.password}}catch(s){c.e(s)}finally{c.f()}}var a=e.map((function(e){return Ee(e._id,e)}));Promise.all(a).then((function(e){}))},Ie={updateUser:Ee,updateMultipleUsers:Ce},Ne=function(e){var t=e.user,n=e.loginUser,a=Object(r.useState)([]),s=Object(l.a)(a,2),i=s[0],o=s[1],u=function(e){o(i.map((function(t){return t._id===e._id?e:t})))};return Object(r.useEffect)((function(){$.a.get("".concat(q,"/users"),{}).then((function(e){o(e.data)}))}),[]),Object(c.jsx)("div",{children:n&&n._id===t._id&&"admin"===n.role&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h5",{className:"mb-3",children:"Account Management"}),Object(c.jsxs)("table",{className:"table table-sm table-hover table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Username"}),Object(c.jsx)("td",{children:"Email"}),Object(c.jsx)("td",{children:"Role"})]})}),Object(c.jsx)("tbody",{children:i.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("input",{type:"text",value:e.username,onChange:function(t){e.username=t.target.value,u(e)}})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{type:"email",value:e.email,onChange:function(t){e.email=t.target.value,u(e)}})}),Object(c.jsx)("td",{children:Object(c.jsxs)("select",{className:"form-control text-center",id:"role",value:e.role,onChange:function(t){e.role=t.target.value,u(e)},children:[Object(c.jsx)("option",{value:"admin",children:"Administrator"}),Object(c.jsx)("option",{value:"user",children:"User"}),Object(c.jsx)("option",{value:"author",children:"Author"})]})})]},e._id)}))})]}),Object(c.jsx)(O.a,{className:"btn btn-primary",onClick:function(){Ce(i)},children:"Submit"})]})})},Te=n(183),we=n(188),Ae=function(e){var t=e.id,n=e.title,r=e.rating,a=e.posterUrl,s=e.releaseYear;return Object(c.jsxs)(we.a,{className:"m-0",border:"primary",children:[Object(c.jsx)(we.a.Img,{variant:"top",src:a}),Object(c.jsxs)(we.a.Body,{children:[Object(c.jsx)(we.a.Title,{children:n}),Object(c.jsxs)(we.a.Subtitle,{className:"mb-2 text-muted",children:[s," - Rating: ",r]}),Object(c.jsx)(u.Link,{to:"/movies/".concat(t),children:Object(c.jsx)(O.a,{variant:"primary",children:"Details"})})]})]})},ke=n(182),Se=n(98),De=function(e){var t=e.movies,n=void 0===t?[]:t;return Object(c.jsx)(ke.a,{fluid:!0,children:Object(c.jsx)(Te.a,{children:n.map((function(e){var t=e.id,n=e.title,r=e.vote_average,a=e.poster_path,s=e.release_date;return Object(c.jsx)(Se.a,{xl:2,lg:3,md:4,sm:6,xs:12,children:Object(c.jsx)(Ae,{id:t,title:n,rating:r,posterUrl:a?P(F,a):"http://via.placeholder.com/342x513",releaseYear:s})},t)}))})})},Re=function(e){var t=e.user,n=Object(r.useState)([]),a=Object(l.a)(n,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){var e=[],n=[];console.log(t.watchlist);try{if(t.watchlist){var c,r=Object(_e.a)(t.watchlist);try{for(r.s();!(c=r.n()).done;){var a=c.value;n.push(J.fetchMovieByID(a).then((function(t){!1!==t.success&&e.push(t)})))}}catch(s){r.e(s)}finally{r.f()}Promise.all(n).then((function(t){return i(e)}))}}catch(o){console.log(o)}}),[t]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{className:"mb-3",children:"Watchlist"}),Object(c.jsx)(Te.a,{children:Object(c.jsx)(De,{movies:s})})]})},Ue=n(187),Le=function(e){var t=e.user,n=e.loginUser,a=Object(r.useState)(t.username),s=Object(l.a)(a,2),i=s[0],o=s[1],u=Object(r.useState)(t.email),d=Object(l.a)(u,2),j=d[0],h=d[1],b=Object(r.useState)(t.role),m=Object(l.a)(b,2),p=m[0],f=m[1],x=Object(r.useState)(""),g=Object(l.a)(x,2),y=g[0],_=g[1];return Object(r.useEffect)((function(){console.log(n)}),[n]),Object(c.jsxs)("div",{id:"profile",children:[Object(c.jsx)("h5",{className:"mb-3",children:"User Profile"}),n&&n._id===t._id&&Object(c.jsx)(Te.a,{className:"align-items-center",children:Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("h6",{children:"Username"}),Object(c.jsx)(v.a,{value:i,onChange:function(e){return o(e.target.value)}}),Object(c.jsx)("h6",{children:"Email"}),Object(c.jsx)(v.a,{value:j,onChange:function(e){return h(e.target.value)}}),Object(c.jsx)("h6",{children:"Password"}),Object(c.jsx)(v.a,{placeholder:"Reset your password here",value:y,onChange:function(e){return _(e.target.value)}}),Object(c.jsx)("h6",{children:"Role"}),Object(c.jsx)(Ue.a,{children:Object(c.jsx)(Ue.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(c.jsxs)(Ue.a.Control,{as:"select",value:p,onChange:function(e){return f(e.target.value)},children:[Object(c.jsx)("option",{value:"admin",children:"Admin"}),Object(c.jsx)("option",{value:"user",children:"User"}),Object(c.jsx)("option",{value:"author",children:" Author"})]})})}),Object(c.jsx)(O.a,{className:"m-4",onClick:function(){Ie.updateUser(t._id,{username:i,email:j,role:p,password:y})},children:"Submit"})]})})]})},Me=n(26),Be=n(27),Fe=n(29),Pe=n(28),He=n.p+"static/media/article.117864ea.png",Ye=n(53),We=n(101),Ke=function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(e){return Object(Me.a)(this,n),t.call(this,e)}return Object(Be.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsxs)(we.a,{className:"m-0",border:"primary",children:[Object(c.jsx)(we.a.Img,{variant:"top",src:He,alt:"Logo"}),Object(c.jsxs)(we.a.Body,{children:[Object(c.jsx)(we.a.Title,{children:this.props.article.title}),Object(c.jsx)(we.a.Subtitle,{className:"mb-2 text-muted",children:this.props.article.authorId.username}),this.props.userId===this.props.article.authorId&&Object(c.jsx)(u.Link,{to:"/".concat(this.props.userId,"/articles/").concat(this.props.article._id),children:Object(c.jsx)(O.a,{variant:"primary",children:"Details"})}),this.props.userId!==this.props.article.authorId&&Object(c.jsx)(u.Link,{to:"/articles/".concat(this.props.article._id),children:Object(c.jsx)(O.a,{variant:"primary",children:"Details"})}),(this.props.loginUser&&"admin"===this.props.loginUser.role||this.props.loginUser&&this.props.loginUser._id===this.props.article.authorId)&&Object(c.jsx)("i",{className:"float-right",onClick:function(){return e.props.deleteArticle(e.props.article)},children:Object(c.jsx)(Ye.a,{icon:We.a})})]})]})}}]),n}(a.a.Component),Ge=function(e){var t=e.articles,n=e.userId,r=e.deleteArticle,a=e.loginUser;return Object(c.jsx)(ke.a,{fluid:!0,children:Object(c.jsx)(Te.a,{children:t.map((function(e){return Object(c.jsx)(Se.a,{xl:2,lg:3,md:4,sm:6,xs:12,children:Object(c.jsx)(Ke,{article:e,userId:n,deleteArticle:r,loginUser:a})},e._id)}))})})},Ve=(n(171),function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(){var e;Object(Me.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={articles:[],article:{},isAuthor:!1,isAdmin:!1,AuthorName:"",userId:"",loginUser:{}},e}return Object(Be.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;$.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(e){if(200===e.status)return e.data})).catch((function(e){console.log(e)})).then((function(t){return e.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{loginUser:t})}),(function(){e.state.loginUser&&e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{isAuthor:"author"===e.state.loginUser.role,isAdmin:"admin"===e.state.loginUser.role,userId:e.state.loginUser._id})}))}))})),t?this.props.findArticlesByAuthor(t):this.props.findAllArticles(),console.log("articles in props: "+this.props.articles.length),console.log("articles in state: "+this.state.articles.length),console.log("userId"+this.state.userId)}},{key:"render",value:function(){var e=this;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"sticky-box",children:(this.state.isAuthor||this.state.isAdmin)&&Object(c.jsx)("button",{type:"button",className:"btn btn-success float-left",onClick:function(){return e.props.addArticle(e.state.userId)},children:"Add Article"})}),Object(c.jsx)(Ge,{articles:this.props.articles,userId:this.state.userId,deleteArticle:this.props.deleteArticle,loginUser:this.state.loginUser})]})}}]),n}(a.a.Component)),Je=Object(j.b)((function(e){return{articles:e.articleReducer.articles}}),(function(e){return{findAllArticles:function(){ne().then((function(t){return e({type:I,articles:t})}))},findArticlesByAuthor:function(t){re(t).then((function(t){return e({type:I,articles:t})}))},addArticle:function(t){ae({title:"New Article",text:"Please write your article here.",authorId:t}).then((function(t){return e({type:w,article:t})}))},deleteArticle:function(t){se(t._id).then((function(t){return e({type:k,articleId:t})}))},findArticlesByTitle:function(t){oe(t).then((function(t){return e({type:C,articles:t})}))}}}))(Ve),qe=function(e){var t=e.fieldName,n=e.fieldContent;return Object(c.jsxs)("div",{children:[Object(c.jsx)("hr",{}),Object(c.jsx)("h6",{className:"text-center",children:Object(c.jsx)("strong",{children:t})}),Object(c.jsx)("p",{className:"text-center",children:n})]})},ze=Object(d.o)((function(e){var t=Object(r.useState)({username:""}),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)({}),o=Object(l.a)(i,2),j=o[0],h=o[1],b=Object(d.m)();Object(r.useEffect)((function(){$.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(e){200!==e.status&&m(),s(e.data)})).catch((function(e){m()}))}),[]),Object(r.useEffect)((function(){b.userId?$.a.get("".concat(z,"/").concat(b.userId)).then((function(e){200!==e.status&&m(),h(e.data)})).catch((function(e){console.log(e),m()})):h(a)}),[a]);var m=function(){e.history.push("/login")};return Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row my-2",children:[Object(c.jsxs)("div",{className:"col-lg-4 order-lg-1 text-center",children:[Object(c.jsx)("img",{src:"https://cdn.pixabay.com/photo/2017/06/13/12/53/profile-2398782_1280.png",width:"200px",className:"mx-auto img-fluid img-circle d-block",alt:"avatar"}),Object(c.jsx)(me.a,{children:Object(c.jsx)(qe,{fieldName:"Username",fieldContent:j.username})}),Object(c.jsx)(me.a,{children:Object(c.jsx)(qe,{fieldName:"Email",fieldContent:j.email})}),Object(c.jsx)(me.a,{children:Object(c.jsx)(qe,{fieldName:"Role",fieldContent:j.role})})]}),Object(c.jsxs)("div",{className:"col-lg-8 order-lg-2",children:[Object(c.jsxs)(pe.a,{variant:"tabs",defaultActiveKey:"/home",children:[j._id===a._id&&Object(c.jsx)(pe.a.Item,{children:Object(c.jsx)(Oe.a,{as:u.Link,to:"/users/".concat(j._id,"/edit"),eventKey:"edit",children:"Edit"})}),Object(c.jsx)(pe.a.Item,{children:Object(c.jsx)(Oe.a,{as:u.Link,to:"/users/".concat(j._id,"/comments"),eventKey:"comments",children:"Comments"})}),Object(c.jsx)(pe.a.Item,{children:Object(c.jsx)(Oe.a,{as:u.Link,to:"/users/".concat(j._id,"/watchlist"),eventKey:"watchlist",children:"Watchlist"})}),("author"===a.role||"admin"===a.role)&&Object(c.jsx)(pe.a.Item,{children:Object(c.jsx)(Oe.a,{as:u.Link,to:"/users/".concat(j._id,"/articles"),eventKey:"articles",children:"Articles"})}),"admin"===a.role&&Object(c.jsx)(pe.a.Item,{children:Object(c.jsx)(Oe.a,{as:u.Link,to:"/users/".concat(j._id,"/account-management"),eventKey:"account-management",children:"Account Management"})})]}),Object(c.jsxs)(d.g,{children:[Object(c.jsx)(d.d,{path:"/users/".concat(j._id,"/comments"),children:Object(c.jsx)(ye,{user:j})}),Object(c.jsx)(d.d,{path:"/users/".concat(j._id,"/account-management"),children:Object(c.jsx)(Ne,{user:j,loginUser:a})}),Object(c.jsx)(d.d,{path:"/users/:userId/articles",component:Je}),Object(c.jsx)(d.d,{path:"/users/".concat(j._id,"/watchlist"),children:Object(c.jsx)(Re,{user:j})}),Object(c.jsx)(d.d,{path:"/users/".concat(j._id,"/edit"),children:Object(c.jsx)(Le,{user:j,loginUser:a})})]})]})]})})}));n(172);var Qe=Object(d.o)((function(e){var t=Object(r.useState)({email:"",password:"",successMessage:null}),n=Object(l.a)(t,2),a=n[0],s=n[1],i=function(e){var t=e.target,n=t.id,c=t.value;s((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(ue.a)({},n,c))}))},u=function(){e.updateTitle("Home"),e.history.push("/home")};return Object(c.jsxs)("div",{className:"card col-12 col-lg-4 login-card mt-2 hv-center",children:[Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:a.email,onChange:i}),Object(c.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(c.jsxs)("div",{className:"form-group text-left",children:[Object(c.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:a.password,onChange:i})]}),Object(c.jsx)("div",{className:"form-check"}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault();var n={email:a.email,password:a.password};$.a.post(q+"/users/login",n).then((function(t){200===t.status?(s((function(e){return Object(o.a)(Object(o.a)({},e),{},{successMessage:"Login successful. Redirecting to home page.."})})),localStorage.setItem(X,t.data.token),u(),e.showError(null)):204===t.code?e.showError("Username and password do not match"):e.showError("Username does not exists")})).catch((function(e){console.log(e)}))},children:"Submit"})]}),Object(c.jsx)("div",{className:"alert alert-success mt-2",style:{display:a.successMessage?"block":"none"},role:"alert",children:a.successMessage}),Object(c.jsxs)("div",{className:"registerMessage",children:[Object(c.jsx)("span",{children:"Dont have an account? "}),Object(c.jsx)("span",{className:"loginText",onClick:function(){return e.history.push("/register"),void e.updateTitle("Register")},children:"Register"})]})]})})),Xe=function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(){return Object(Me.a)(this,n),t.apply(this,arguments)}return Object(Be.a)(n,[{key:"componentDidMount",value:function(){var e=ge.a.parse(this.props.location.search).name;e?this.props.fetchMoviesByTitle(e):this.props.fetchPopularMovies(40)}},{key:"render",value:function(){return Object(c.jsx)(De,{movies:this.props.movies})}}]),n}(r.Component),Ze=Object(j.b)((function(e){return{movies:e.movieReducer.movies}}),(function(e){return{fetchMoviesByTitle:function(t){return J.fetchMoviesByTitle(t).then((function(t){return e({type:g,movies:t})}))},fetchPopularMovies:function(t){return J.fetchPopularMovies(t).then((function(t){return e({type:g,movies:t})}))}}}))(Xe),$e=n(190),et=n(63),tt=n(185),nt=n(78),ct=function(e){var t=e.user,n=void 0===t?{}:t,r=e.children,a=e.comment,s=e.updateCommentState,i=a.userId[0];return Object(c.jsxs)("div",{children:[Object(c.jsx)("hr",{}),Object(c.jsxs)(tt.a,{children:[Object(c.jsx)(nt.a,{className:"mr-3",src:n.avatarUrl||"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2264%22%20height%3D%2264%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2064%2064%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_175da5a14d1%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_175da5a14d1%22%3E%3Crect%20width%3D%2264%22%20height%3D%2264%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%2213.8359375%22%20y%3D%2236.5%22%3E64x64%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"}),Object(c.jsxs)(tt.a.Body,{children:[Object(c.jsx)("h5",{className:"mt-0 text-justify",children:i.username||"No Username"}),r]}),n._id===i._id&&Object(c.jsx)(O.a,{variant:"primary",onClick:function(){return fe.deleteComment(a._id,n._id).then((function(){return window.location.reload(!1)}))},children:"Delete"}),n._id===i._id&&!a.editing&&Object(c.jsx)(O.a,{variant:"warning",onClick:function(){a.editing=!0,s(a)},children:"Edit"}),n._id===i._id&&a.editing&&Object(c.jsx)(O.a,{variant:"success",onClick:function(){a.editing=!1,s(a),fe.updateComment(a)},children:"Submit"})]})]})},rt=n(99),at=n(100),st=function(){var e=Object(r.useState)({username:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),o=i[0],j=i[1],h=Object(d.m)().movieID;Object(r.useEffect)((function(){$.a.get(z+"/me",{headers:{token:localStorage.getItem(X)}}).then((function(e){200==e.status&&a(e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(c.jsxs)(Ue.a,{children:[Object(c.jsxs)(rt.a,{children:[Object(c.jsx)(at.a,{htmlFor:"comment",className:"float-left",children:"Your Comment"}),n.username&&Object(c.jsx)(v.a,{name:"comment",as:"textarea",rows:"3",onChange:function(e){j(e.target.value)}}),!n.username&&Object(c.jsxs)("div",{children:["Please",Object(c.jsx)(u.Link,{to:"/login",children:" Log in "}),"to comment."]})]}),n.username&&Object(c.jsx)(O.a,{type:"submit",variant:"outline-primary",className:"float-left",onClick:function(){!function(e){var t={movieId:e,text:o,userId:n._id};fe.addCommentForMovie(t)}(h)},children:"Send"})]})},it=function(e){var t=e.curUser,n=Object(r.useState)([]),a=Object(l.a)(n,2),s=a[0],i=a[1],o=Object(d.m)().movieID;Object(r.useEffect)((function(){fe.getCommentsForMovie(o).then((function(e){i(e)}))}),[]);var u=function(e){i(s.map((function(t){return t._id===e?e:t})))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(Te.a,{children:Object(c.jsx)(Se.a,{children:Object(c.jsx)("h3",{className:"float-left",children:"Comments"})})}),Object(c.jsx)(Te.a,{className:"mb-3",children:Object(c.jsx)(Se.a,{children:Object(c.jsx)(st,{})})}),s.map((function(e){return Object(c.jsx)("div",{id:e._id,children:Object(c.jsx)(Te.a,{children:Object(c.jsx)(Se.a,{children:Object(c.jsxs)(ct,{user:t,comment:e,updateCommentState:u,children:[!e.editing&&Object(c.jsx)("p",{className:"text-justify",children:e.text}),e.editing&&Object(c.jsx)(v.a,{value:e.text,onChange:function(t){e.text=t.target.value,u(e)}})]})})})},e._id)}))]})},ot=function(e){var t=e.cast;return Object(c.jsxs)($e.a,{children:[Object(c.jsx)(u.Link,{to:"/actors/".concat(t.id),children:Object(c.jsx)("img",{src:P(B,t.profile_path),class:"figure-img img-fluid rounded",alt:t.name})}),Object(c.jsx)($e.a.Caption,{children:Object(c.jsx)("strong",{children:t.name})}),Object(c.jsx)($e.a.Caption,{class:"figure-caption",children:t.character})]})},lt=function(e){var t=e.casts;return Object(c.jsxs)("div",{children:[Object(c.jsx)(Te.a,{children:Object(c.jsx)(Se.a,{children:Object(c.jsx)("h3",{className:"float-left",children:"Casts"})})}),Object(c.jsx)(Te.a,{children:t.filter((function(e){return null!==e.profile_path})).map((function(e){return Object(c.jsx)(Se.a,{xl:2,lg:3,md:4,sm:6,xs:12,children:Object(c.jsx)(ot,{cast:e})},e.id)}))})]})},ut=n(105),dt=n(104),jt={removeMovieFromWatchlist:function(e,t){return fetch("".concat(z,"/").concat(e,"/movies/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addMovie:!1})}).then((function(e){return e.json()}))},addMovieToWatchlist:function(e,t){return fetch("".concat(z,"/").concat(e,"/movies/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addMovie:!0})}).then((function(e){return e.json()}))}},ht=function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(e){var c;return Object(Me.a)(this,n),(c=t.call(this,e)).addWatchlist=function(e){c.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{isWatchlist:!0})})),c.state.loginUser&&jt.addMovieToWatchlist(c.state.loginUser._id,e)},c.removeWatchlist=function(e){c.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{isWatchlist:!1})})),c.state.loginUser&&jt.removeMovieFromWatchlist(c.state.loginUser._id,e)},c.state={isWatchlist:!1,loginUser:c.props.loginUser,movie:c.props.movie},c}return Object(Be.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.match.params;n.movieID&&this.props.fetchMovieByID(n.movieID),$.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(c){e=c.data,console.log(e),t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{loginUser:c.data,isWatchlist:e.watchlist.includes(n.movieID)})}))})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e,t,n){var c=this.props.match.movieID;c!==e.match.movieID&&this.props.fetchMovieByID(c)}},{key:"render",value:function(){var e=this,t=this.props.movie;this.props.loginUser;return Object(c.jsxs)(ke.a,{children:[Object(c.jsx)("h1",{className:"display-1 font-weight-bold",children:t.title||"Title"}),Object(c.jsx)("h3",{children:Object(c.jsxs)("small",{className:"text-muted",children:["Rating: ",t.vote_average||-1," | ",t.genre," (",t.release_date||"Unknown",")"]})}),this.state.isWatchlist&&Object(c.jsx)(O.a,{onClick:function(){return e.removeWatchlist(t.id)},children:Object(c.jsx)(Ye.a,{icon:dt.faHeart})}),!this.state.isWatchlist&&Object(c.jsx)(O.a,{onClick:function(){return e.addWatchlist(t.id)},children:Object(c.jsx)(Ye.a,{icon:ut.faHeart})}),Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsxs)($e.a,{children:[Object(c.jsx)("img",{src:P(F,t.poster_path),className:"figure-img img-fluid rounded",alt:"A generic square placeholder image with rounded corners in a figure."}),Object(c.jsx)(et.a,{placeholder:"tagline",children:t.tagline})]}),Object(c.jsx)("p",{className:"text-justify",children:t.overview||"Description"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)(lt,{casts:t.casts||[]}),Object(c.jsx)("hr",{}),Object(c.jsx)(it,{curUser:this.state.loginUser})]})}}]),n}(r.Component),bt=Object(j.b)((function(e){return{movie:e.movieReducer.movie,loginUser:e.navBarReducer.loginUser}}),(function(e){return{fetchMovieByID:function(t){return J.fetchMovieByID(t).then((function(t){return e({type:y,movie:t})}))}}}))(ht),mt=n(102),pt=function(e){switch(e){case 1:return"Female";case 2:return"Male";default:return"Unknown"}},Ot=function(e){var t=e.fieldName,n=e.fieldContent;return Object(c.jsxs)(mt.a,{children:[Object(c.jsx)("h6",{className:"text-left",children:Object(c.jsx)("strong",{children:t})}),Object(c.jsx)("p",{className:"text-left",children:n})]})},ft=function(e){var t=e.actorDetails;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{className:"text-left mb-4",children:Object(c.jsx)("strong",{children:"Info"})}),Object(c.jsx)($e.a,{children:Object(c.jsx)($e.a.Image,{alt:"171x180",src:t.profile_path?P(F,t.profile_path):"http://via.placeholder.com/342x513",fluid:!0,rounded:!0})}),Object(c.jsxs)(me.a,{variant:"flush",children:[Object(c.jsx)(Ot,{fieldName:"Known For",fieldContent:t.known_for_department}),Object(c.jsx)(Ot,{fieldName:"Gender",fieldContent:pt(t.gender)}),Object(c.jsx)(Ot,{fieldName:"Birthday",fieldContent:t.birthday}),t.deathdate&&Object(c.jsx)(Ot,{fieldName:"Day of Death",fieldContent:t.deathday}),t.place_of_birth&&Object(c.jsx)(Ot,{fieldName:"Place of Birth",fieldContent:t.place_of_birth}),t.homepage&&Object(c.jsx)(Ot,{fieldName:"Homepage",fieldContent:t.homepage}),t.also_known_as&&Object(c.jsx)(Ot,{fieldName:"Also Known as",fieldContent:t.also_known_as.join(" \u2022 ")})]})]})},xt=function(e){e.name;var t=e.biography;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{className:"text-left mb-4",children:Object(c.jsx)("strong",{children:"Biography"})}),Object(c.jsx)("p",{className:"text-left",children:t})]})},vt=function(e){return null!=(e.poster_path||e.backdrop_path)},gt=function(e){var t,n=e.credit;return Object(c.jsxs)(tt.a,{className:"mb-4",children:[Object(c.jsx)(u.Link,{to:"/movies/".concat(n.id),children:Object(c.jsx)(nt.a,{className:"mr-3",src:vt(n)?P(M,n.poster_path||n.backdrop_path):"http://via.placeholder.com/92x128"})}),Object(c.jsxs)(tt.a.Body,{className:"text-left",children:[Object(c.jsx)("h5",(t={className:"mt-0"},Object(ue.a)(t,"className","text-left"),Object(ue.a)(t,"children",n.title||n.original_name),t)),n.overview]})]})},yt=function(e){var t=e.credits,n=void 0===t?[]:t;return Object(c.jsxs)(Te.a,{children:[Object(c.jsx)(Se.a,{md:12,className:"text-left mb-3",children:Object(c.jsx)("h3",{children:Object(c.jsx)("strong",{children:"Credits"})})}),Object(c.jsx)(Te.a,{style:{height:"400px",overflowY:"auto"},children:n.map((function(e){return Object(c.jsx)(Se.a,{md:12,children:Object(c.jsx)(gt,{credit:e})})}))})]})},_t=function(e){var t=e.photoUrls;return Object(c.jsx)(Te.a,{className:"mb-4",children:Object(c.jsxs)(Se.a,{children:[Object(c.jsx)(Te.a,{className:"mb-3",children:Object(c.jsx)(Se.a,{children:Object(c.jsx)("h3",{className:"float-left",children:Object(c.jsx)("strong",{children:"Photos"})})})}),Object(c.jsx)(Te.a,{style:{height:"300px",overflowY:"auto"},children:t.map((function(e){return Object(c.jsx)(Se.a,{xl:3,lg:4,md:6,sm:12,xs:12,children:Object(c.jsx)($e.a,{children:Object(c.jsx)($e.a.Image,{src:P(B,e),fluid:!0,rounded:!0})})},e.substr(1))}))})]})})},Et=function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(){return Object(Me.a)(this,n),t.apply(this,arguments)}return Object(Be.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.actorID&&this.props.fetchActorByID(e.actorID)}},{key:"componentDidUpdate",value:function(e,t,n){var c=this.props.match.actorID;c!==e.match.actorID&&this.props.fetchActorByID(c)}},{key:"render",value:function(){return Object(c.jsxs)(ke.a,{children:[Object(c.jsx)("h1",{className:"text-left mt-4 display-1",style:{fontWeight:800},children:Object(c.jsx)("strong",{children:this.props.actorDetails.name})}),Object(c.jsxs)(Te.a,{className:"mt-4",children:[Object(c.jsx)(Se.a,{md:3,children:Object(c.jsx)(ft,{actorDetails:this.props.actorDetails})}),Object(c.jsxs)(Se.a,{md:9,children:[Object(c.jsx)(xt,{name:this.props.actorDetails.name,biography:this.props.actorDetails.biography}),Object(c.jsx)(_t,{photoUrls:(this.props.actorDetails.photos||[]).map((function(e){return e.file_path}))}),Object(c.jsx)(yt,{credits:this.props.actorDetails.credits})]})]})]})}}]),n}(r.Component),Ct=Object(j.b)((function(e){return{actorDetails:e.actorReducer.actor}}),(function(e){return{fetchActorByID:function(t){return J.fetchActorByID(t).then((function(t){return e({type:_,actor:t})}))}}}))(Et),It=(n(173),function(e){Object(Fe.a)(n,e);var t=Object(Pe.a)(n);function n(e){var c;return Object(Me.a)(this,n),(c=t.call(this,e)).state={isAuthor:!1,userId:"",articleId:"",authorId:"",editing:!1},c}return Object(Be.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.articleId=this.props.match.params.articleId,this.props.findArticleById(this.state.articleId).then((function(){e.state.userId=e.props.match.params.userId,e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{authorId:e.props.article.authorId})})),e.props.match.params.userId===e.props.article.authorId&&e.setState({isAuthor:!0})}))}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:"inputBox",children:[Object(c.jsxs)("div",{className:"sticky-box",children:[!this.state.editing&&this.state.isAuthor&&Object(c.jsx)("button",{type:"button",className:"btn btn-success float-left",onClick:function(){return e.setState({editing:!0})},children:"Edit"}),this.state.editing&&Object(c.jsx)("button",{type:"button",className:"btn btn-primary float-left",onClick:function(){ie(e.props.article._id,e.props.article).then((function(t){return e.setState({editing:!1})}))},children:"Save"})]}),!this.state.editing&&Object(c.jsx)("h1",{children:this.props.article.title}),!this.state.editing&&Object(c.jsx)("p",{children:this.props.article.text}),this.state.editing&&Object(c.jsx)("input",{className:"form-control inner-box-margin",placeholder:"Please input the article title",onChange:function(t){return e.props.updateOnchange(Object(o.a)(Object(o.a)({},e.props.article),{},{title:t.target.value}))},value:this.props.article.title}),this.state.editing&&Object(c.jsx)("textarea",{className:"form-control",id:"text-content",rows:"20",placeholder:"Please input the article text",onChange:function(t){return e.props.updateOnchange(Object(o.a)(Object(o.a)({},e.props.article),{},{text:t.target.value}))},value:this.props.article.text})]})}}]),n}(a.a.Component)),Nt=Object(j.b)((function(e){return{article:e.articleReducer.article}}),(function(e){return{findArticleById:function(t){return ce(t).then((function(t){e({type:T,article:t})}))},updateOnchange:function(t){return e({type:S,article:t})}}}))(It),Tt=function(e){var t=e.actor;return Object(c.jsxs)(we.a,{className:"m-0",border:"primary",children:[Object(c.jsx)(u.Link,{to:"/actors/".concat(t.id),children:Object(c.jsx)(we.a.Img,{variant:"top",src:t.profile_path?P(B,t.profile_path):"http://via.placeholder.com/154x231"})}),Object(c.jsx)(we.a.Body,{children:Object(c.jsx)(we.a.Title,{children:t.name})})]})},wt=function(e){var t=e.actors,n=void 0===t?[]:t;return Object(c.jsx)(ke.a,{fluid:!0,children:Object(c.jsx)(Te.a,{children:n.map((function(e){return Object(c.jsx)(Se.a,{xl:2,lg:3,md:4,sm:6,xs:12,children:Object(c.jsx)(Tt,{actor:e})},e.id)}))})})},At=n(45),kt=n(191),St=function(e,t){for(var n=[t],c=t-1,r=t+1;(c>=1||r<=e)&&n.length<5;)c>=1&&(n=[c--].concat(Object(At.a)(n))),r<=e&&n.push(r++);return n[0]>2?n=[1,"<<"].concat(Object(At.a)(n)):2===n[0]&&(n=[1].concat(Object(At.a)(n))),n[n.length-1]<e-1?n.push(">>",e):n[n.length-1]===e-1&&n.push(e),console.log(n),n},Dt=function(e){var t=e.numPages,n=e.currentPage,r=e.getLinkForPage;return Object(c.jsx)(kt.a,{size:"lg",children:St(t,n).map((function(e){return"<<"===e?Object(c.jsx)("li",{className:"page-item",children:Object(c.jsxs)(u.Link,{className:"page-link",to:r(n-1),children:[Object(c.jsx)("span",{"aria-hidden":"true",children:"\xab"}),Object(c.jsx)("span",{className:"sr-only",children:"Previous"})]})}):">>"===e?Object(c.jsx)("li",{className:"page-item",children:Object(c.jsxs)(u.Link,{className:"page-link",to:r(n+1),children:[Object(c.jsx)("span",{"aria-hidden":"true",children:"\xbb"}),Object(c.jsx)("span",{class:"sr-only",children:"Previous"})]})}):Object(c.jsx)("li",{className:"page-item"+(n===e?" active":""),children:Object(c.jsx)(u.Link,{className:"page-link",to:r(e),children:e})})}))})},Rt=Object(j.b)((function(e){return{actors:e.actorReducer.actors}}),(function(e){return{findActorsByName:function(t,n){return J.findActorsByName(t,n).then((function(t){return e({type:E,actors:t})}))}}}))((function(e){var t=e.findActorsByName,n=e.actors,a=Object(r.useRef)({}),s=Object(d.l)(),i=new URLSearchParams(s.search),o=i.get("name"),l=parseInt(i.get("page")||"1");a.current.name===o&&a.current.page===l||t(o,l||1),Object(r.useEffect)((function(){a.current={name:o,page:l}}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(wt,{actors:n.results}),Object(c.jsx)("div",{className:"d-flex justify-content-center mt-4",children:Object(c.jsx)(Dt,{numPages:n.total_pages,currentPage:l||1,getLinkForPage:function(e){return function(e){var t=new URLSearchParams(s.search);return t.set("page",e),s.pathname+"?"+t.toString()}(e)}})})]})}));var Ut=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(r.useState)(null),s=Object(l.a)(a,2),i=s[0],j=s[1],h=Object(r.useState)({username:"1"}),b=Object(l.a)(h,2),m=b[0],p=b[1];return Object(r.useEffect)((function(){$.a.get(q+"/users/me",{headers:{token:localStorage.getItem(X)}}).then((function(e){200==e.status&&p(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(c.jsx)(u.BrowserRouter,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(le,{}),Object(c.jsxs)("div",{className:"container-fluid d-flex align-items-center flex-column",children:[Object(c.jsxs)(d.g,{children:[Object(c.jsx)(d.d,{path:["/"],exact:!0,component:Ze}),Object(c.jsx)(d.d,{path:["/movies"],exact:!0,component:Ze}),Object(c.jsx)(d.d,{path:"/movies/:movieID",exact:!0,render:function(e){return Object(c.jsx)(bt,Object(o.a)(Object(o.a)({},e),{},{curUser:m}))}}),Object(c.jsx)(d.d,{path:"/actors/:actorID",exact:!0,component:Ct}),Object(c.jsx)(d.d,{path:"/actors",exact:!0,component:Rt}),Object(c.jsx)(d.d,{path:"/articles",exact:!0,component:Je}),Object(c.jsx)(d.d,{path:"/:userId/articles",exact:!0,component:Je}),Object(c.jsx)(d.d,{path:"/articles/:articleId",exact:!0,component:Nt}),Object(c.jsx)(d.d,{path:"/:userId/articles/:articleId",exact:!0,component:Nt}),Object(c.jsx)(d.d,{path:"/register",children:Object(c.jsx)(de,{showError:j,updateTitle:n})}),Object(c.jsx)(d.d,{path:"/login",children:Object(c.jsx)(Qe,{showError:j,updateTitle:n})}),Object(c.jsx)(be,{path:"/home",children:Object(c.jsx)(ze,{})}),Object(c.jsx)(d.d,{path:"/users/:userId",children:Object(c.jsx)(ze,{})})]}),Object(c.jsx)(je,{errorMessage:i,hideError:j})]})]})})},Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Mt=n(52),Bt={},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.SEARCH_KEYWORD:case D.TYPE_KEYWORD:return Object(o.a)(Object(o.a)({},e),{},{keyword:t.keyword});case D.GET_LOGIN_USER:return Object(o.a)(Object(o.a)({},e),{},{loginUser:t.loginUser});case D.UPDATE_SEARCH_TYPE:return Object(o.a)(Object(o.a)({},e),{},{searchType:t.searchType});default:return e}},Pt={movies:[],movie:{}},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.SEARCH_KEYWORD:case D.TYPE_KEYWORD:return Object(o.a)(Object(o.a)({},e),{},{keyword:t.keyword});case D.FIND_MOVIES_BY_TITLE:case D.FETCH_MOVIES:return Object(o.a)(Object(o.a)({},e),{},{movies:t.movies});case D.FETCH_MOVIE:return Object(o.a)(Object(o.a)({},e),{},{movie:t.movie});default:return e}},Yt={articles:[],article:{}},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return console.log("FIND_ARTICLES_BY_KEYWORD"),Object(o.a)(Object(o.a)({},e),{},{articles:t.articles});case I:return console.log("FETCH_ARTICLES"),Object(o.a)(Object(o.a)({},e),{},{articles:t.articles});case N:return console.log("FETCH_ARTICLES_BY_AUTHOR"),Object(o.a)(Object(o.a)({},e),{},{articles:t.articles});case T:return console.log("FETCH_ARTICLE_BY_ID"),Object(o.a)(Object(o.a)({},e),{},{article:t.article});case k:return console.log("DELETE_ARTICLE"),Object(o.a)(Object(o.a)({},e),{},{articles:e.articles.filter((function(e){return e._id!==t.articleId}))});case A:return console.log("UPDATE_ARTICLE"),Object(o.a)(Object(o.a)({},e),{},{articles:e.articles.map((function(e){return e._id===t.article._id?t.article:e}))});case S:return console.log("ON_CHANGE"),Object(o.a)(Object(o.a)({},e),{},{article:t.article});case w:return console.log("ADD_ARTICLE"),Object(o.a)(Object(o.a)({},e),{},{articles:[].concat(Object(At.a)(e.articles),[t.article])});default:return e}},Kt={actor:{},actors:[]},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.FETCH_ACTOR:return Object(o.a)(Object(o.a)({},e),{},{actor:t.actor});case D.FETCH_ACTORS:return Object(o.a)(Object(o.a)({},e),{},{actors:t.actors});default:return e}},Vt=Object(Mt.b)({navBarReducer:Ft,movieReducer:Ht,articleReducer:Wt,actorReducer:Gt}),Jt=Object(Mt.c)(Vt);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(j.a,{store:Jt,children:Object(c.jsx)(Ut,{})})}),document.getElementById("root")),Lt()}},[[174,1,2]]]);
//# sourceMappingURL=main.d1086481.chunk.js.map